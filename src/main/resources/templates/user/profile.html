<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" th:href="@{/style.css}">

    <title>Thông tin cá nhân</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<style>
    .profile-card {
        max-width: 600px;
        margin: auto;
        box-shadow: 0 0 10px rgba(0,0,0,0.1);
        border-radius: 12px;
    }
    .avatar {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        object-fit: cover;
        border: 3px solid #007bff;
        margin-bottom: 15px;
    }
</style>


<body class="container mt-4">
<header class="navbar">
    <a th:href="@{/home}" class="logo">GymCare</a>
    <nav>
        <ul>
            <li><a th:href="@{/home}">Trang chủ</a></li>
            <li><a th:href="@{/package}" >Gói tập</a></li>
            <li><a th:href="@{/trainers}">Huấn luyện viên</a></li>
            <li><a th:href="@{/classes}">Lớp học</a></li>
            <li><a th:href="@{/shop}">Cửa hàng</a></li>
        </ul>
    </nav>
    <div class="auth-section">
        <div sec:authorize="isAuthenticated()" class="profile-dropdown">
            <img th:src="@{/images/default-avatar.png}" alt="Avatar">
            <span sec:authentication="principal.username">Username</span>
            <ul class="dropdown-menu">
                <li><a th:href="@{/user/profile}"><i class="fas fa-user-circle"></i> Hồ sơ cá nhân</a></li>
                <li sec:authorize="hasRole('ADMIN')">
                    <a th:href="@{/auth/dashBoard}"><i class="fas fa-user-shield"></i> Trang quản trị</a>
                <li >
                    <a th:href="@{/my-schedule/personal}"><i class="fas fa-user"></i> Lịch PT của tôi</a>
                </li>
                <li >
                    <a th:href="@{/my-schedule/classes}"><i class="fas fa-users"></i> Lớp học của tôi</a>
                </li>

                <li sec:authorize="hasAuthority('TRAINER')">
                    <a th:href="@{/my-schedule/teaching}"><i class="fas fa-chalkboard-teacher"></i> Lịch dạy của tôi</a>
                </li>
                <li sec:authorize="hasRole('TRAINER')">
                    <a th:href="@{/auth/dashBoard}"><i class="fas fa-cog"></i> Bảng điều khiển</a>
                </li>
                <li><a th:href="@{/orders/history}"><i class="fas fa-history"></i> Lịch sử giao dịch</a></li>
                <li class="logout"><a th:href="@{/logout}"><i class="fas fa-sign-out-alt"></i> Đăng xuất</a></li>
            </ul>
        </div>
        <a sec:authorize="!isAuthenticated()" th:href="@{/index}" class="cta-button">Đăng nhập</a>
    </div>
</header>
<h2>Thông tin cá nhân</h2>

<div th:if="${param.success}" class="alert alert-success mt-3">
    Cập nhật thông tin thành công!
</div>

<div class="card profile-card p-4">
    <div class="text-center">
        <img th:src="${user.avatar != null ? user.avatar : '/images/default-avatar.png'}"
             alt="Avatar" class="avatar">
        <h4 class="mt-2" th:text="${user.firstName + ' ' + user.lastName}">Tên người dùng</h4>
        <p class="text-muted" th:text="${user.role}">ROLE_MEMBER</p>
    </div>

    <hr>

    <div class="mb-2"><b>Tên đăng nhập:</b> <span th:text="${user.userName}">Username</span></div>
    <div class="mb-2"><b>Email:</b> <span th:text="${user.email}">Email</span></div>
    <div class="mb-2"><b>Số điện thoại:</b>
        <span th:text="${user.phone != null ? user.phone : 'Chưa cập nhật'}"></span>
    </div>
    <div class="mb-2"><b>Ngày sinh:</b>
        <span th:text="${user.birthDate != null ? user.birthDate : 'Chưa cập nhật'}"></span>
    </div>
    <div class="mb-2"><b>Giới tính:</b>
        <span th:text="${user.gender != null ? user.gender : 'Chưa cập nhật'}"></span>
    </div>
    <div class="mb-2"><b>Trạng thái tài khoản:</b>
        <span th:text="${user.status}"></span>
    </div>
    <div class="mb-2"><b>Tiểu sử:</b>
        <p th:text="${user.bio != null ? user.bio : 'Chưa có thông tin'}"></p>
    </div>

    <div class="text-center mt-3">
        <a href="/user/edit" class="btn btn-primary">Chỉnh sửa thông tin</a>
    </div>
</div>
</body>
</html>